# 任务弹窗按钮功能更新

## 修改内容

### 1. 按钮文本更改

**修改前**: "查看详情"
**修改后**: "跳转处理"

### 2. 按钮状态控制

新增了按钮的禁用状态控制：

```typescript
// 判断是否可以处理（异常数量大于0）
const canHandle = computed(() => {
  return (taskCompletionData.value?.alertCount || 0) > 0
})
```

### 3. 按钮禁用条件

当异常数量为 **0** 时，按钮会被禁用：
- 按钮变为灰色
- 鼠标悬停时显示禁用光标
- 点击无效

## 实现细节

### 1. 按钮模板

```vue
<button 
  class="task-completion-btn task-completion-btn-primary" 
  :class="{ 'disabled': !canHandle }"
  :disabled="!canHandle"
  @click="goToMissionLogs"
>
  跳转处理
</button>
```

### 2. 样式设计

**正常状态**:
- 蓝色渐变背景
- 白色文字
- 悬停时有动画效果

**禁用状态**:
- 半透明灰色背景
- 灰色文字
- 透明度降低到0.6
- 禁用悬停效果
- 鼠标光标变为 `not-allowed`

### 3. 逻辑判断

```typescript
const canHandle = computed(() => {
  return (taskCompletionData.value?.alertCount || 0) > 0
})
```

- 获取异常数量
- 如果异常数量大于0，返回 `true`（可点击）
- 如果异常数量为0，返回 `false`（禁用）

## 用户体验

### 1. 视觉反馈

- **有异常时**: 按钮高亮显示，用户可以点击跳转到处理页面
- **无异常时**: 按钮变灰，明确表示无需处理

### 2. 操作逻辑

- **有异常**: 点击"跳转处理" → 跳转到任务日志页面 → 自动筛选对应任务
- **无异常**: 按钮禁用 → 用户只能点击"关闭"按钮

### 3. 信息传达

- 按钮文本从"查看详情"改为"跳转处理"，更明确表达操作目的
- 通过按钮状态直观显示是否需要处理异常

## 使用场景

### 1. 任务成功且无异常

- 弹窗显示：任务执行成功，异常数量：0个
- "跳转处理"按钮：禁用状态
- 用户操作：只能点击"关闭"

### 2. 任务成功但有异常

- 弹窗显示：任务执行成功，异常数量：X个
- "跳转处理"按钮：正常状态
- 用户操作：可以点击"跳转处理"查看异常详情

### 3. 任务失败且有异常

- 弹窗显示：任务执行失败，异常数量：X个
- "跳转处理"按钮：正常状态
- 用户操作：可以点击"跳转处理"查看失败原因

### 4. 任务失败但无异常

- 弹窗显示：任务执行失败，异常数量：0个
- "跳转处理"按钮：禁用状态
- 用户操作：只能点击"关闭"

## 技术实现

### 1. 响应式计算

使用 `computed` 属性确保按钮状态随异常数量实时更新。

### 2. 条件渲染

通过 `:class` 和 `:disabled` 属性动态控制按钮状态。

### 3. 样式隔离

使用 `:not(.disabled)` 选择器确保禁用状态不影响正常状态的样式。

## 后续优化建议

### 1. 提示信息

可以考虑在按钮禁用时显示提示信息，说明为什么不能点击。

### 2. 快捷键支持

可以添加键盘快捷键支持，如 ESC 关闭弹窗。

### 3. 动画效果

可以添加按钮状态切换时的过渡动画效果。
